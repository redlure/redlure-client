<div class="modal-header">
    <h4 class="modal-title">New Campaign: Sending Options</h4>
    <div>
      <button class="btn btn-outline-danger" style="float: right; margin-left: 2px" (click)="closeModal()">Close</button>
    </div>
  </div>
  <form [formGroup]="myForm" (ngSubmit)="onSubmit()">
    <div class="modal-body">
      <div class="container">
        
       <!--Target List Field-->
       <div class="input-group form-group">
          <div class="input-group-prepend">
              <span class="input-group-text span-login">List</span>
          </div>
          <select class="form-control" formControlName="targetList" [ngClass]="{ 'is-invalid': submitted && f.targetList.errors }">
            <option disabled selected value> -- Select a list -- </option>
            <option *ngFor="let list of newCampaignService.allModules['lists']" [value]="list.id">{{ list.name }}</option>
          </select>
          <div *ngIf="submitted && f.targetList.errors" class="invalid-feedback">
            <div *ngIf="f.targetList.errors.required">List is required</div>
          </div>
        </div>

        <hr>

         <!--Profile Field-->
         <div class="input-group form-group">
            <div class="input-group-prepend">
                <span class="input-group-text span-login">Profile</span>
            </div>
            <select class="form-control" formControlName="profile" [ngClass]="{ 'is-invalid': submitted && f.profile.errors }">
              <option disabled selected value> -- Select a profile -- </option>
              <option *ngFor="let profile of newCampaignService.allModules['profiles']" [value]="profile.id">{{ profile.name }}</option>
            </select>
            <div *ngIf="submitted && f.profile.errors" class="invalid-feedback">
              <div *ngIf="f.profile.errors.required">Profile is required</div>
            </div>
          </div>

          <!--Batch Number Field-->
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text span-login">Send</span>
            </div>
            <input placeholder="5" type="text" formControlName="batchNumber" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.batchNumber.errors }"/>
            <div *ngIf="submitted && f.batchNumber.errors" class="invalid-feedback">
              <div *ngIf="f.batchNumber.errors.pattern">Must be a number</div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text">Emails Every</span>
            </div>

          <!--Batch Interval Field-->
            <input placeholder="10" type="text" formControlName="batchInterval" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.batchInterval.errors }"/>
            <div *ngIf="submitted && f.batchInterval.errors" class="invalid-feedback">
              <div *ngIf="f.batchInterval.errors.pattern">Must be a number</div>
            </div>
            <div class="input-group-append">
              <span class="input-group-text">Minutes</span>
            </div>
          </div>

          <!--Start Date/Time Field-->
          <div class="input-group form-group">
            <div class="input-group-prepend">
              <span class="input-group-text span-login">Start Time</span>
            </div>
            <app-date-time-picker formControlName="startDate" name="startDate" [ngClass]="{ 'is-invalid': submitted && f.startDate.errors }"></app-date-time-picker>   
            <div *ngIf="submitted && f.startDate.errors" class="invalid-feedback">
              <div *ngIf="f.startDate.errors.invalid">Must be a valid date time</div>
            </div>          
          </div>
          
          <div *ngIf="failed" class="text-danger">
            <br>
            <p style="display: inline; margin-right: 1vh">{{ failMsg }}</p>
            <i class="fa fa-times"></i>
          </div>
          
      </div>
    </div>
    <div class="modal-footer">
      <div *ngIf="loading" class="loadingio-spinner-dual-ball-jmseu88834m float-right"><div class="ldio-c46ivvx8kf">
        <div></div><div></div><div></div>
        </div></div>
      <button type="button" class="btn btn-outline-dark" style="float: right" (click)="backModal()"><i class="fas fa-arrow-left"></i></button>
      <button ngbAutofocus class="btn btn-outline-primary float-right login_btn" style="margin-left: 2px"><i class="far fa-paper-plane"></i></button>
    </div>
  </form>